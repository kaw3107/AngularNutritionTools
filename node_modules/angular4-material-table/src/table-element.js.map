{"version":3,"file":"table-element.js","sourceRoot":"","sources":["../../src/table-element.ts"],"names":[],"mappings":"AAIA,OAAO,SAAS,MAAM,kBAAkB,CAAC;AAEzC;IAQE,sBAAY,IAA8B;QACxC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC5B,CAAC;IAED,6BAAM,GAAN;QACE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC9B,CAAC;IAED,wCAAiB,GAAjB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;YAChB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI;YACF,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC;IAED,gCAAS,GAAT;QACE,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;IAC1B,CAAC;IAED,qCAAc,GAAd;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;YACjC,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACrC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;QAC3B,CAAC;IACH,CAAC;IACH,mBAAC;AAAD,CAAC,AAtCD,IAsCC","sourcesContent":["import { FormGroup } from '@angular/forms';\n\nimport { TableDataSource } from './table-data-source';\n\nimport cloneDeep from 'lodash.clonedeep';\n\nexport class TableElement<T> {\n  id: number;\n  editing: boolean;\n  currentData: T;\n  originalData?: T;\n  source: TableDataSource<T>;\n  validator: FormGroup;\n\n  constructor(init: Partial<TableElement<T>>) {\n    Object.assign(this, init);\n  }\n\n  delete(): void {\n    this.source.delete(this.id);\n  }\n\n  confirmEditCreate(): boolean {\n    if (this.id == -1)\n      return this.source.confirmCreate(this);\n    else\n      return this.source.confirmEdit(this);\n  }\n\n  startEdit(): void {\n    this.originalData = cloneDeep(this.currentData);\n    this.editing = true;\n    this.validator.enable();\n  }\n\n  cancelOrDelete(): void {\n    if (this.id == -1 || !this.editing)\n      this.delete();\n    else {\n      this.currentData = this.originalData;\n      this.editing = false;\n      this.validator.disable();\n    }\n  }\n}\n"]}